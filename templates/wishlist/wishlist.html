{% extends 'partials/base.html' %}

{% block title %}–ö–æ—à–Ω–∏—á–∫–∞ | Modern Shop{% endblock %}

{% block content %}
    <div class="max-w-6xl mx-auto px-4 py-10">

        <!-- Header -->
        <div class="mb-8 text-center">
            <h1 class="text-3xl sm:text-3xl font-bold text-gray-900">
                –¢–≤–æ—ò–∞—Ç–∞ –ö–æ—à–Ω–∏—á–∫–∞
            </h1>
            {% if products_with_sizes|length > 0 %}
                <p class="text-gray-500 mt-2 text-sm sm:text-base">{{ products_with_sizes|length }} –ø—Ä–æ–∏–∑–≤–æ–¥–∏</p>
            {% endif %}
        </div>

        {% if products_with_sizes|length > 0 %}
            <!-- Cart Items -->
            <div class="divide-y divide-gray-200 mb-8">
                {% for item in products_with_sizes %}
                    <div class="mt-8">
                        <ul class="space-y-4">
                            <li class="flex items-center gap-4">
                                <img src="{{ item.product.images.first.image.url }}"
                                     alt="{{ item.product.name }}"
                                     class="size-16 rounded-sm object-cover"/>

                                <div>
                                    <h3 class="text-sm text-gray-900">{{ item.product.name }}</h3>

                                    <dl class="mt-0.5 space-y-px text-[10px] text-gray-600">
                                        <div>
                                            <dt class="inline">–ì–æ–ª–µ–º–∏–Ω–∞:</dt>
                                            <dd class="inline">{{ item.size }}</dd>
                                        </div>
                                        <div>
                                            <dt class="inline">–ë–æ—ò–∞:</dt>
                                            <dd class="inline normal-case">{{ item.product.color }}</dd>
                                        </div>
                                    </dl>
                                </div>

                                <div class="flex flex-1 items-center justify-end gap-2">
                                    <div class="border border-white rounded-0 me-5">
                                        <dd class="inline normal-case px-2">{{ item.quantity }}</dd>
                                    </div>

                                    <button class="text-gray-600 transition hover:text-red-600"
                                            onclick="window.location.href='{% url 'wishlist_remove' item.product.id %}'">
                                        <span class="sr-only">Remove item</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                             stroke-width="1.5" stroke="currentColor" class="size-4">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                  d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166
                                                 m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084
                                                 a2.25 2.25 0 01-2.244-2.077L4.772 5.79
                                                 m14.456 0a48.108 48.108 0 00-3.478-.397
                                                 m-12 .562c.34-.059.68-.114 1.022-.165
                                                 m0 0a48.11 48.11 0 013.478-.397
                                                 m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201
                                                 a51.964 51.964 0 00-3.32 0
                                                 c-1.18.037-2.09 1.022-2.09 2.201v.916
                                                 m7.5 0a48.667 48.667 0 00-7.5 0"/>
                                        </svg>
                                    </button>
                                </div>
                            </li>
                        </ul>
                    </div>
                {% endfor %}
            </div>

            <!-- Price Summary -->
            <div class="mt-8 flex justify-end border-t border-gray-100 pt-8">
                <div class="w-screen max-w-lg space-y-4">
                    <dl class="space-y-0.5 text-sm text-gray-700">
                        <div class="flex justify-between">
                            <dt>–°—É–º–∞</dt>
                            <dd>{{ total_price }} –¥–µ–Ω.</dd>
                        </div>

                        <div class="flex justify-between items-center">
                            <dt class="bg-red-500 text-white text-sm font-semibold px-2 py-1 rounded-md">% –ü–æ–ø—É—Å—Ç</dt>
                            <dd class="text-red-600 font-medium">-199 –¥–µ–Ω</dd>
                        </div>

                        <div class="flex justify-between !text-base font-medium">
                            <dt>–ó–∞ –ø–ª–∞—ú–∞—ö–µ</dt>
                            <dd>{{ total_price }} –¥–µ–Ω.</dd>
                        </div>
                    </dl>

                    <div class="flex justify-between mt-5 gap-5">
                        <button class="flex items-center gap-2 rounded-xl bg-gray-200 px-5 py-3 text-sm text-dark"
                                onclick="window.location.href='{% url 'products' %}'">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                 stroke-width="1.5" stroke="currentColor" class="size-5">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                      d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"/>
                            </svg>
                            –ù–∞–∑–∞–¥ –∫–æ–Ω –ø–∞–∑–∞—Ä–µ—ö–µ
                        </button>

                        <form method="POST" action="{% url 'create_order' %}">
                            {% csrf_token %}
                            <button type="submit"
                                    class="flex items-center gap-2 rounded-xl bg-gradient-to-r from-pink-500 to-pink-600 px-5 py-3 text-sm text-white">
                                –ù–∞–ø—Ä–∞–≤–∏ –ù–∞—Ä–∞—á–∫–∞
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                     stroke-width="1.5" stroke="currentColor" class="size-5">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"/>
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
            </div>

        {% else %}
            <!-- Empty State -->
            <div class="bg-white rounded-2xl shadow-lg p-8 sm:p-12 text-center">
                <div class="mx-auto w-20 h-20 sm:w-24 sm:h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6 text-gray-400">
                    <svg class="w-10 h-10 sm:w-12 sm:h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                              d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
                    </svg>
                </div>
                <h3 class="text-xl sm:text-2xl font-semibold text-gray-900 mb-3">–í–∞—à–∞—Ç–∞ –∫–æ—à–Ω–∏—á–∫–∞ –µ –ø—Ä–∞–∑–Ω–∞</h3>
                <p class="text-gray-500 mb-6 sm:mb-8 text-sm sm:text-base">–î–æ–¥–∞–¥–µ—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏ –∑–∞ –¥–∞ –≥–∏ –≤–∏–¥–∏—Ç–µ –æ–≤–¥–µ üëá</p>
                <a href="{% url 'products' %}"
                   class="inline-block bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white font-semibold px-4 sm:px-6 py-2 sm:py-3 rounded-xl shadow-md transition text-sm sm:text-base">
                    –†–∞–∑–≥–ª–µ–¥–∞—ò –ø—Ä–æ–∏–∑–≤–æ–¥–∏
                </a>
            </div>
        {% endif %}
    </div>
{% endblock %}
