{% load socialaccount %}
<!DOCTYPE html>
<html lang="mk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User Profile</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        'pink-light': '#fce4ec',
        'pink-medium': '#f8bbd0',
        'pink-dark': '#f48fb1',
        'pink-darker': '#ec407a',
        'pink-accent': '#e91e63'
      },
      fontFamily: { sans: ['Inter', 'sans-serif'] }
    }
  }
}
</script>
<style>
body {
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
    min-height: 100vh;
}
.profile-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(236, 64, 122, 0.15);
    transition: all 0.3s ease;
}
.profile-card:hover {
    box-shadow: 0 20px 45px rgba(236, 64, 122, 0.25);
    transform: translateY(-5px);
}
.profile-pic {
    transition: transform 0.3s ease;
    border: 4px solid #fce4ec;
    box-shadow: 0 8px 20px rgba(236, 64, 122, 0.2);
}
.profile-pic:hover {
    transform: scale(1.05);
    border-color: #f8bbd0;
}
.status-badge {
    background: linear-gradient(45deg, #f8bbd0, #f48fb1);
    color: white;
    box-shadow: 0 4px 10px rgba(236, 64, 122, 0.25);
}
.btn-primary {
    background: linear-gradient(45deg, #f48fb1, #ec407a);
    color: white;
    box-shadow: 0 5px 15px rgba(236, 64, 122, 0.3);
    transition: all 0.3s ease;
}
.btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(236, 64, 122, 0.4);
}
.btn-secondary {
    background: #fce4ec;
    color: #ec407a;
    transition: all 0.3s ease;
}
.btn-secondary:hover {
    background: #f8bbd0;
    transform: translateY(-2px);
}
.google-btn {
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    border: 1px solid #f8bbd0;
}
.google-btn:hover {
    box-shadow: 0 8px 20px rgba(236, 64, 122, 0.2);
    border-color: #f48fb1;
}
.info-card {
    background: linear-gradient(to right, #fce4ec, #f8bbd0);
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(236, 64, 122, 0.15);
}
.divider {
    border-color: #f8bbd0;
}
.footer-text {
    color: #f48fb1;
}
</style>
</head>
<body class="flex items-center justify-center py-10 px-4">

<div class="profile-card p-8 w-full max-w-md">

    {% if user.is_authenticated %}
    <div class="flex flex-col items-center">
        <div class="relative">
            {% if user.socialaccount_set.all.0.get_avatar_url %}
                <img src="{{ user.socialaccount_set.all.0.get_avatar_url }}" alt="Profile picture"
                     class="profile-pic w-28 h-28 rounded-full">
            {% else %}
                <div class="profile-pic w-28 h-28 rounded-full bg-gradient-to-r from-pink-medium to-pink-darker flex items-center justify-center text-4xl text-white font-bold">
                    {{ user.first_name|first|upper }}{{ user.last_name|first|upper }}
                </div>
            {% endif %}
            <div class="absolute bottom-0 right-0 w-7 h-7 rounded-full bg-green-500 border-2 border-white"></div>
        </div>
        <h2 class="text-2xl font-bold text-gray-800 mt-6">{{ user.first_name }} {{ user.last_name }}</h2>
        <p class="text-gray-600 flex items-center mt-1"><i class="far fa-envelope mr-2 text-pink-darker"></i> {{ user.email }}</p>

        <div class="info-card p-4 mt-6 w-full">
            <div class="flex justify-between items-center mb-3">
                <span class="text-pink-darker font-medium flex items-center">
                    <i class="fas fa-user-check mr-2"></i> Статус на сметка
                </span>
                <span class="status-badge px-3 py-1 text-sm font-medium rounded-full">Потврдена</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-pink-darker font-medium flex items-center">
                    <i class="far fa-calendar-alt mr-2"></i> Членува од
                </span>
                <span class="text-gray-800 font-medium">{{ user.date_joined|date:"d.m.Y" }}</span>
            </div>
        </div>

        <div class="mt-8 w-full flex flex-col gap-3">
            <a href="{% url 'logout' %}" class="btn-primary px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2">
                <i class="fas fa-sign-out-alt"></i> Одјави се
            </a>

            <a href="{% url 'profile_page' %}" class="btn-secondary px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2">
                <i class="fas fa-sync-alt"></i> Освежи профил
            </a>
        </div>
    </div>

    {% else %}
    <div class="flex flex-col items-center">
        <div class="w-24 h-24 rounded-full bg-gradient-to-r from-pink-medium to-pink-darker flex items-center justify-center text-white mb-6 shadow-lg">
            <i class="fas fa-user-circle text-5xl"></i>
        </div>
        <h2 class="text-2xl font-bold text-gray-800 text-center">Најави се за да продолжиш</h2>
        <p class="text-gray-600 mt-2 text-center">Влези во твојата сметка за да ги видиш твоите информации</p>

        <a href="{% url 'google_login' %}" class="google-btn mt-8 w-full flex items-center justify-center gap-3 px-6 py-3 rounded-lg font-medium bg-white text-gray-700 cursor-pointer">
            <div class="flex">
                <span class="text-red-500 font-bold">G</span>
                <span class="text-blue-500 font-bold">o</span>
                <span class="text-yellow-400 font-bold">o</span>
                <span class="text-blue-500 font-bold">g</span>
                <span class="text-green-500 font-bold">l</span>
                <span class="text-red-500 font-bold">e</span>
            </div>
            <span class="ml-2">Најави се со Google</span>
        </a>

        <div class="mt-6 text-center">
            <p class="text-pink-darker text-sm">Немаш сметка? <span class="text-pink-accent font-medium">Регистрирај се бесплатно</span></p>
        </div>
        <div class="mt-8 pt-6 divider w-full">
            <p class="footer-text text-xs text-center">Со најавување, се согласуваш со нашите Услови на користење и Политика за приватност</p>
        </div>
    </div>
    {% endif %}

</div>
</body>
</html>